define(["require", "exports", "MainMenu", "lodash", "../services/AuthenticationSvc"], function (require, exports, MainMenu_1, _) {
    "use strict";
    var MainCtrl = (function () {
        function MainCtrl($state, $mdSidenav, $rootScope, $http) {
            var _this = this;
            this.$state = $state;
            this.$mdSidenav = $mdSidenav;
            this.isLoading = false;
            this.menus = [];
            this.activeMenu = {};
            this.appInfo = {};
            this.user = sessionStorage.getItem("user");
            this.menus = _.sortBy(MainMenu_1.MainMenu.menus, function (m) { return m.title; });
            this.checkMenuState($state.current);
            $rootScope.$on("$stateChangeSuccess", function (event, toState) {
                _this.checkMenuState(toState);
            });
            $http.get("/api/version").success(function (res) {
                _this.appInfo = res;
            });
        }
        MainCtrl.prototype.navigateTo = function (menu) {
            this.$mdSidenav("left").close();
            this.activeMenu = menu;
            this.$state.go(menu.stateName);
        };
        MainCtrl.prototype.toggleMenu = function () {
            this.$mdSidenav("left").toggle();
        };
        MainCtrl.prototype.checkMenuState = function (toState) {
            var m = _.find(this.menus, function (x) { return x.stateName === toState.name; });
            if (m) {
                this.activeMenu = m;
            }
        };
        MainCtrl.prototype.logout = function () {
            this.$state.go("logout");
        };
        MainCtrl.$inject = [
            "$state",
            "$mdSidenav",
            "$rootScope",
            "$http"
        ];
        return MainCtrl;
    })();
    exports.MainCtrl = MainCtrl;
    angular.module("haptic.core").controller("MainCtrl", MainCtrl);
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWFpbkN0cmwuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi90cy9jb21wb25lbnRzL2NvcmUvY29udHJvbGxlcnMvTWFpbkN0cmwudHMiXSwibmFtZXMiOlsiTWFpbkN0cmwiLCJNYWluQ3RybC5jb25zdHJ1Y3RvciIsIk1haW5DdHJsLm5hdmlnYXRlVG8iLCJNYWluQ3RybC50b2dnbGVNZW51IiwiTWFpbkN0cmwuY2hlY2tNZW51U3RhdGUiLCJNYWluQ3RybC5sb2dvdXQiXSwibWFwcGluZ3MiOiI7SUE0QkEsWUFBWSxDQUFDO0lBRWI7UUFjQ0Esa0JBQ1NBLE1BQWdDQSxFQUNoQ0EsVUFBNENBLEVBQ3BEQSxVQUFxQ0EsRUFDckNBLEtBQTJCQTtZQWxCN0JDLGlCQXNEQ0E7WUF2Q1NBLFdBQU1BLEdBQU5BLE1BQU1BLENBQTBCQTtZQUNoQ0EsZUFBVUEsR0FBVkEsVUFBVUEsQ0FBa0NBO1lBZHJEQSxjQUFTQSxHQUFHQSxLQUFLQSxDQUFDQTtZQUVsQkEsVUFBS0EsR0FBZUEsRUFBRUEsQ0FBQ0E7WUFDdkJBLGVBQVVBLEdBQWFBLEVBQUVBLENBQUNBO1lBQzFCQSxZQUFPQSxHQUFRQSxFQUFFQSxDQUFDQTtZQWNqQkEsSUFBSUEsQ0FBQ0EsSUFBSUEsR0FBR0EsY0FBY0EsQ0FBQ0EsT0FBT0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsQ0FBQ0E7WUFFM0NBLElBQUlBLENBQUNBLEtBQUtBLEdBQUdBLENBQUNBLENBQUNBLE1BQU1BLENBQUNBLG1CQUFRQSxDQUFDQSxLQUFLQSxFQUFFQSxVQUFDQSxDQUFXQSxJQUFLQSxPQUFBQSxDQUFDQSxDQUFDQSxLQUFLQSxFQUFQQSxDQUFPQSxDQUFDQSxDQUFDQTtZQUNoRUEsSUFBSUEsQ0FBQ0EsY0FBY0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsT0FBT0EsQ0FBQ0EsQ0FBQ0E7WUFDcENBLFVBQVVBLENBQUNBLEdBQUdBLENBQUNBLHFCQUFxQkEsRUFBRUEsVUFBQ0EsS0FBNEJBLEVBQUVBLE9BQTBCQTtnQkFDOUZBLEtBQUlBLENBQUNBLGNBQWNBLENBQUNBLE9BQU9BLENBQUNBLENBQUNBO1lBQzlCQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUVIQSxLQUFLQSxDQUFDQSxHQUFHQSxDQUFDQSxjQUFjQSxDQUFDQSxDQUFDQSxPQUFPQSxDQUFDQSxVQUFDQSxHQUFRQTtnQkFDMUNBLEtBQUlBLENBQUNBLE9BQU9BLEdBQUdBLEdBQUdBLENBQUNBO1lBQ3BCQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUNKQSxDQUFDQTtRQUVERCw2QkFBVUEsR0FBVkEsVUFBV0EsSUFBY0E7WUFDeEJFLElBQUlBLENBQUNBLFVBQVVBLENBQUNBLE1BQU1BLENBQUNBLENBQUNBLEtBQUtBLEVBQUVBLENBQUNBO1lBQ2hDQSxJQUFJQSxDQUFDQSxVQUFVQSxHQUFHQSxJQUFJQSxDQUFDQTtZQUN2QkEsSUFBSUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsRUFBRUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsU0FBU0EsQ0FBQ0EsQ0FBQ0E7UUFDaENBLENBQUNBO1FBRURGLDZCQUFVQSxHQUFWQTtZQUNDRyxJQUFJQSxDQUFDQSxVQUFVQSxDQUFDQSxNQUFNQSxDQUFDQSxDQUFDQSxNQUFNQSxFQUFFQSxDQUFDQTtRQUNsQ0EsQ0FBQ0E7UUFFREgsaUNBQWNBLEdBQWRBLFVBQWVBLE9BQTBCQTtZQUN4Q0ksSUFBSUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsS0FBS0EsRUFBRUEsVUFBQ0EsQ0FBV0EsSUFBS0EsT0FBQUEsQ0FBQ0EsQ0FBQ0EsU0FBU0EsS0FBS0EsT0FBT0EsQ0FBQ0EsSUFBSUEsRUFBNUJBLENBQTRCQSxDQUFDQSxDQUFDQTtZQUMxRUEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7Z0JBQ1BBLElBQUlBLENBQUNBLFVBQVVBLEdBQUdBLENBQUNBLENBQUNBO1lBQ3JCQSxDQUFDQTtRQUNGQSxDQUFDQTtRQUVESix5QkFBTUEsR0FBTkE7WUFDQ0ssSUFBSUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsRUFBRUEsQ0FBQ0EsUUFBUUEsQ0FBQ0EsQ0FBQ0E7UUFDMUJBLENBQUNBO1FBNUNNTCxnQkFBT0EsR0FBR0E7WUFDaEJBLFFBQVFBO1lBQ1JBLFlBQVlBO1lBQ1pBLFlBQVlBO1lBQ1pBLE9BQU9BO1NBQ1BBLENBQUNBO1FBeUNIQSxlQUFDQTtJQUFEQSxDQUFDQSxBQXRERCxJQXNEQztJQXREWSxnQkFBUSxXQXNEcEIsQ0FBQTtJQUVELE9BQU8sQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLENBQUMsVUFBVSxDQUFDLFVBQVUsRUFBRSxRQUFRLENBQUMsQ0FBQyJ9